import{_ as k,a as y,r as _,p as h,c as o,o as a,d as s,f as t,w,n as r,e as f,v as p,t as V}from"./index-Cu44W2Vv.js";import{u as S}from"./passwordSearchStore-BJdo95vH.js";const C={class:"find-container"},g={class:"find-card"},x={class:"find-header"},P={class:"input-group"},B={class:"email-row"},D=["disabled"],M=["disabled"],R={key:0},A={key:1},E={key:2},F={key:0,class:"verify-section"},N={class:"verify-row"},T=["disabled"],U=["disabled"],q={key:0,class:"timer"},H={key:1,class:"success"},I={key:2,class:"error"},O=["disabled"],W={__name:"PasswordSearchView",setup($){const u=y(),e=S(),n=_(""),d=_("");h(()=>{e.startFlow("PASSWORD_SEARCH")});const b=async()=>{if(!n.value.trim())return alert("이메일을 입력해주세요.");await e.sendCode(n.value)&&alert("인증번호가 발송되었습니다.")},m=async()=>{if(!d.value.trim())return alert("인증번호를 입력해주세요.");await e.verifyCode(n.value,d.value)&&alert("인증되었습니다.")},v=()=>{e.emailVerified&&u.push({path:"/password/reset",query:{token:e.resetToken}})};return(c,i)=>(a(),o("div",C,[s("div",g,[s("div",x,[i[3]||(i[3]=s("h2",{class:"title"},"비밀번호 찾기",-1)),s("button",{class:"back-btn",onClick:i[0]||(i[0]=l=>t(u).back())},"이전")]),i[6]||(i[6]=s("p",{class:"subtitle"},"가입하신 이메일로 인증번호를 보내드립니다.",-1)),s("form",{onSubmit:w(v,["prevent"])},[s("div",P,[i[5]||(i[5]=s("label",null,"이메일",-1)),s("div",B,[f(s("input",{"onUpdate:modelValue":i[1]||(i[1]=l=>n.value=l),disabled:t(e).emailVerified,placeholder:"이메일 입력"},null,8,D),[[p,n.value]]),s("button",{type:"button",class:"btn-sub",disabled:t(e).sending||t(e).emailVerified,onClick:b},[t(e).emailVerified?(a(),o("span",R,"재요청")):t(e).sending?(a(),o("span",A,"요청 중...")):(a(),o("span",E,"인증요청"))],8,M)]),t(e).codeSent?(a(),o("div",F,[i[4]||(i[4]=s("label",null,"인증번호",-1)),s("div",N,[f(s("input",{"onUpdate:modelValue":i[2]||(i[2]=l=>d.value=l),disabled:t(e).emailVerified,placeholder:"인증번호 입력"},null,8,T),[[p,d.value]]),s("button",{type:"button",onClick:m,class:"btn-sub",disabled:t(e).emailVerified}," 확인 ",8,U)]),!t(e).emailVerified&&t(e).timer>0?(a(),o("p",q," ⏳ "+V(t(e).timer)+"초 남음 ",1)):r("",!0),t(e).emailVerified?(a(),o("p",H,"✔ 인증 완료!")):r("",!0),t(e).verifyFail?(a(),o("p",I,"❌ 인증 실패 또는 만료")):r("",!0)])):r("",!0)]),s("button",{class:"btn-red w-full big",disabled:!t(e).emailVerified}," 다음 단계로 ",8,O)],32)])]))}},G=k(W,[["__scopeId","data-v-0e8b8a11"]]);export{G as default};
