import{j as E,r as o,s as N,k as B,_ as A,u as D,a as F,l as G,m as L,c as p,o as m,d as l,f as t,w as P,e as b,n as y,v as g,t as I}from"./index-Cu44W2Vv.js";const T=E("emailVerify",()=>{const h=o(!1),u=o(!1),s=o(!1),c=o(0),n=o(!1),d=o(!1);let a=null;const v=()=>{c.value=300,a&&clearInterval(a),a=setInterval(()=>{c.value--,c.value<=0&&(clearInterval(a),u.value=!1,s.value=!0)},1e3)};return{codeSent:h,emailVerified:u,verifyFail:s,timer:c,sending:n,verifying:d,sendCode:async f=>{if(n.value){alert("ì´ë¯¸ ìš”ì²­ ì¤‘ì…ë‹ˆë‹¤.");return}n.value=!0;try{return await N({email:f,purpose:"SIGNUP"}),h.value=!0,s.value=!1,u.value=!1,v(),!0}catch(w){throw w}finally{n.value=!1}},verifyCode:async(f,w)=>{if(!d.value){d.value=!0;try{return(await B({email:f,code:w,purpose:"SIGNUP"})).data?.data?.success?(u.value=!0,s.value=!1,clearInterval(a),!0):(u.value=!1,s.value=!0,!1)}catch(C){throw u.value=!1,s.value=!0,C}finally{d.value=!1}}},reset:()=>{h.value=!1,u.value=!1,s.value=!1,c.value=0,n.value=!1,d.value=!1,a&&clearInterval(a)}}}),j={class:"signup-container"},R={class:"signup-card"},$={class:"signup-header"},q={class:"input-group"},z={key:0,class:"error"},H={key:1,class:"success"},J={class:"input-group"},K={class:"input-group"},O={key:0,class:"error"},Q={key:1,class:"success"},W={class:"input-group"},X={class:"email-row"},Y=["disabled"],Z=["disabled"],ee={key:0,class:"verify-section"},se={class:"verify-row"},le=["disabled"],te=["disabled"],ae={class:"timer"},ie={key:0,class:"success"},ne={key:1,class:"error"},oe={class:"input-group"},ue=["disabled"],re={__name:"SignupView",setup(h){const u=D(),s=T(),c=F(),n=o(""),d=o(""),a=o(""),v=o(""),_=o(""),k=o(""),V=o(!1),f=o(!1),w=async()=>{if(n.value.trim())try{V.value=await u.checkLoginId(n.value)}catch(i){alert(i.customMessage||"ì•„ì´ë”” í™•ì¸ ì‹¤íŒ¨")}},C=async()=>{if(a.value.trim())try{f.value=await u.checkNickname(a.value)}catch(i){alert(i.customMessage||"ë‹‰ë„¤ì„ í™•ì¸ ì‹¤íŒ¨")}},S=async()=>{if(!v.value.trim())return alert("ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.");try{await s.sendCode(v.value),alert("ì¸ì¦ë²ˆí˜¸ê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(i){alert(i.customMessage||"ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨")}},M=async()=>{if(!k.value.trim())return alert("ì¸ì¦ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");try{const i=await s.verifyCode(v.value,k.value);alert(i?"ì¸ì¦ ì„±ê³µ!":"ì¸ì¦ ì‹¤íŒ¨")}catch(i){alert(i.customMessage||"ì¸ì¦ ì‹¤íŒ¨")}},U=G(()=>n.value&&d.value&&a.value&&v.value&&_.value&&!V.value&&!f.value&&s.emailVerified),x=async()=>{if(!U.value)return alert("ì…ë ¥ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");try{const i=await u.register({loginId:n.value,name:d.value,nickname:a.value,password:_.value,email:v.value});if(!i.success)return alert(i.message);alert("íšŒì›ê°€ì… ì™„ë£Œ! ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”."),c.push("/login")}catch(i){alert(i.customMessage||"íšŒì›ê°€ì… ì‹¤íŒ¨")}};return L(()=>{s.reset()}),(i,e)=>(m(),p("div",j,[l("div",R,[l("div",$,[e[7]||(e[7]=l("h2",{class:"title"},"íšŒì›ê°€ì…",-1)),l("button",{class:"back-btn",onClick:e[0]||(e[0]=r=>t(c).back())},"ì´ì „")]),e[14]||(e[14]=l("p",{class:"subtitle"},"ìš´ë™ì˜ ë¯¼ì¡±ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‹ï¸",-1)),l("form",{onSubmit:P(x,["prevent"])},[l("div",q,[e[8]||(e[8]=l("label",null,"ì•„ì´ë””",-1)),b(l("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>n.value=r),onBlur:w,placeholder:"ì•„ì´ë”” ì…ë ¥"},null,544),[[g,n.value]]),n.value&&V.value?(m(),p("p",z,"ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.")):y("",!0),n.value&&!V.value?(m(),p("p",H,"ì‚¬ìš© ê°€ëŠ¥í•œ ì•„ì´ë””ì…ë‹ˆë‹¤.")):y("",!0)]),l("div",J,[e[9]||(e[9]=l("label",null,"ì´ë¦„",-1)),b(l("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>d.value=r),placeholder:"ì´ë¦„ ì…ë ¥"},null,512),[[g,d.value]])]),l("div",K,[e[10]||(e[10]=l("label",null,"ë‹‰ë„¤ì„",-1)),b(l("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>a.value=r),onBlur:C,placeholder:"ë‹‰ë„¤ì„ ì…ë ¥"},null,544),[[g,a.value]]),a.value&&f.value?(m(),p("p",O,"ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.")):y("",!0),a.value&&!f.value?(m(),p("p",Q,"ì‚¬ìš© ê°€ëŠ¥í•œ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.")):y("",!0)]),l("div",W,[e[12]||(e[12]=l("label",null,"ì´ë©”ì¼",-1)),l("div",X,[b(l("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>v.value=r),placeholder:"ì´ë©”ì¼ ì…ë ¥",disabled:t(s).sending||t(s).emailVerified},null,8,Y),[[g,v.value]]),l("button",{type:"button",onClick:S,class:"btn-sub",disabled:t(s).sending||t(s).emailVerified},I(t(s).emailVerified?"ì¸ì¦ì™„ë£Œ":t(s).sending?"ìš”ì²­ ì¤‘...":t(s).codeSent?"ì¬ìš”ì²­":"ì¸ì¦ìš”ì²­"),9,Z)]),t(s).codeSent?(m(),p("div",ee,[e[11]||(e[11]=l("label",null,"ì¸ì¦ë²ˆí˜¸",-1)),l("div",se,[b(l("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>k.value=r),placeholder:"ì¸ì¦ë²ˆí˜¸ ì…ë ¥",disabled:t(s).emailVerified},null,8,le),[[g,k.value]]),l("button",{type:"button",onClick:M,class:"btn-sub",disabled:t(s).verifying||t(s).emailVerified},I(t(s).emailVerified?"ì™„ë£Œ":t(s).verifying?"í™•ì¸ ì¤‘...":"í™•ì¸"),9,te)]),l("p",ae,"â³ "+I(t(s).timer)+"ì´ˆ ë‚¨ìŒ",1),t(s).emailVerified?(m(),p("p",ie,"âœ” ì´ë©”ì¼ ì¸ì¦ ì™„ë£Œ!")):y("",!0),t(s).verifyFail&&!t(s).emailVerified?(m(),p("p",ne," ì¸ì¦ ì‹¤íŒ¨ ë˜ëŠ” ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ")):y("",!0)])):y("",!0)]),l("div",oe,[e[13]||(e[13]=l("label",null,"ë¹„ë°€ë²ˆí˜¸",-1)),b(l("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>_.value=r),type:"password",placeholder:"ë¹„ë°€ë²ˆí˜¸ ì…ë ¥"},null,512),[[g,_.value]])]),l("button",{class:"btn-red big w-full",disabled:!U.value||t(u).loading},I(t(u).loading?"ê°€ì… ì¤‘...":"íšŒì›ê°€ì…"),9,ue)],32)])]))}},ve=A(re,[["__scopeId","data-v-01536bf5"]]);export{ve as default};
