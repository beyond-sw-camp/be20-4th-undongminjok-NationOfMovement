import{j as S,r as e,s as C,k as I}from"./index-Cu44W2Vv.js";const A=S("passwordSearch",()=>{const u=e(!1),o=e(!1),s=e(!1),a=e(!1),t=e(0),n=e(null),v=e("PASSWORD_SEARCH");e("");let l=null;const d=r=>{v.value=r,c()},c=()=>{u.value=!1,o.value=!1,s.value=!1,a.value=!1,t.value=0,n.value=null,l&&clearInterval(l)},p=()=>{t.value=300,a.value=!1,l&&clearInterval(l),l=setInterval(()=>{t.value--,t.value<=0&&(clearInterval(l),a.value=!0)},1e3)};return{sending:u,codeSent:o,emailVerified:s,verifyFail:a,timer:t,resetToken:n,startFlow:d,sendCode:async r=>{u.value=!0;try{return await C({email:r,purpose:v.value}),o.value=!0,s.value=!1,n.value=null,p(),!0}catch{return!1}finally{u.value=!1}},verifyCode:async(r,f)=>{try{const i=await I({email:r,code:f,purpose:v.value}),y=i.data?.data?.success,m=i.data?.data?.resetToken;return y?(s.value=!0,a.value=!1,n.value=m,clearInterval(l),t.value=0,!0):(s.value=!1,a.value=!0,!1)}catch{return s.value=!1,a.value=!0,!1}},reset:c}});export{A as u};
